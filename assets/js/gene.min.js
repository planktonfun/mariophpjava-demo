var Gene=function(c){0<c.length&&(this.code=c);this.cost=9999};Gene.prototype.code=[];Gene.prototype.random=function(){this.code=generateActions()};Gene.prototype.mutate=function(c){if(!(Math.random()>c)){c=Math.floor(Math.random()*this.code.length)-1;var b=0.5>=Math.random()?-1:1,b=this.getShiftedLetters(c,b),a=[];for(i=0;i<this.code.length;i++)i==c&&(this.code[i].action=b),a.push(this.code[i]);this.code=a}};
Gene.prototype.getShiftedLetters=function(c,b){var a=index+b;0>a&&(a=actions.length-1);a>=actions.length&&(a=0);return actions[a]};Gene.prototype.mate=function(c){var b=Math.round(this.code.length/2)-1,a=this.code.slice(0,b),d=this.code.slice(b),e=c.code.slice(0,b);c=c.code.slice(b);a=a.concat(c);d=e.concat(d);return[new Gene(a),new Gene(d)]};Gene.prototype.calcCost=function(){this.cost=start(compileGeneratedActions(this.code))};
var generateActions=function(){for(var c=[],b=symbols.length-1;0<=b;b--){var a=symbols[b],d=actions[Math.floor(Math.random()*actions.length)];0==symbols[b]&&(d=!1);for(var e=1;e<=perimeter;e++)for(var f=1;f<=perimeter;f++)!1!=d&&c.push({x:f,y:e,symbol:a,action:d})}return c},compileGeneratedActions=function(c){var b={};$.each(function(a){b[a.x+"-"+a.y+"-"+a.symbol]=a.action});return b};
